--- create_replace.result
+++ create_replace,ib,row.reject
@@ -1,4 +1,4 @@
-set @@default_storage_engine=Aria;
+set @@default_storage_engine=InnoDB;
 create table t1 (c int);
 create or replace table t1 (a int, b int, key k (a), key k (b));
 ERROR 42000: Duplicate key name 'k'
@@ -11,10 +11,9 @@
 flush tables;
 # QUERY: CREATE OR REPLACE TABLE t1 (new int)
 # CRASH POINT: ddl_log_create_before_create_frm
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -22,10 +21,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_create_table
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -33,10 +31,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_create_table
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -44,10 +41,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_drop
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -55,10 +51,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_binlog
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -67,9 +62,8 @@
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_prepare_eof
 # No crash!
-t1.MAD
-t1.MAI
 t1.frm
+t1.ibd
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
 t1	CREATE TABLE `t1` (
@@ -77,9 +71,8 @@
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_create_after_binlog
-t1.MAD
-t1.MAI
 t1.frm
+t1.ibd
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
 t1	CREATE TABLE `t1` (
@@ -88,9 +81,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_create_log_complete
 # No crash!
-t1.MAD
-t1.MAI
 t1.frm
+t1.ibd
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
 t1	CREATE TABLE `t1` (
@@ -98,10 +90,9 @@
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_after_rename_table
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -109,9 +100,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_replace_before_remove_backup
-t1.MAD
-t1.MAI
 t1.frm
+t1.ibd
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
 t1	CREATE TABLE `t1` (
@@ -119,9 +109,8 @@
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_after_remove_backup
-t1.MAD
-t1.MAI
 t1.frm
+t1.ibd
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
 t1	CREATE TABLE `t1` (
@@ -130,10 +119,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # QUERY: CREATE OR REPLACE TABLE t1 LIKE const_table
 # CRASH POINT: ddl_log_create_before_create_frm
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -141,10 +129,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_create_table
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -152,10 +139,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_create_table
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -163,10 +149,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_drop
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -174,10 +159,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_binlog
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -220,10 +204,9 @@
 ) ENGINE=MyISAM DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_after_rename_table
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -254,10 +237,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # QUERY: CREATE OR REPLACE TABLE t1 SELECT * from const_table
 # CRASH POINT: ddl_log_create_before_create_frm
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -265,10 +247,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_create_table
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -276,10 +257,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_create_table
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -287,10 +267,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_drop
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -298,10 +277,9 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_binlog
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -309,21 +287,23 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_prepare_eof
-t1.MAD
-t1.MAI
+t1.TRG
 t1.frm
-master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 SELECT * from const_table
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
-  `new` int(11) DEFAULT NULL,
-  `b` int(11) DEFAULT NULL
+  `old` int(11) DEFAULT NULL
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
+a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_binlog
-t1.MAD
-t1.MAI
 t1.frm
-master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 SELECT * from const_table
+t1.ibd
+master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE `t1` (
+  `new` int(11) DEFAULT NULL,
+  `b` int(11) DEFAULT NULL
+)
+master-bin.000001	#	Annotate_rows	#	#	CREATE OR REPLACE TABLE t1 SELECT * from const_table
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
@@ -331,10 +311,13 @@
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_create_log_complete
-t1.MAD
-t1.MAI
 t1.frm
-master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 SELECT * from const_table
+t1.ibd
+master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE `t1` (
+  `new` int(11) DEFAULT NULL,
+  `b` int(11) DEFAULT NULL
+)
+master-bin.000001	#	Annotate_rows	#	#	CREATE OR REPLACE TABLE t1 SELECT * from const_table
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
@@ -342,10 +325,9 @@
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_after_rename_table
-t1.MAD
-t1.MAI
 t1.TRG
 t1.frm
+t1.ibd
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `old` int(11) DEFAULT NULL
@@ -353,10 +335,13 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_replace_before_remove_backup
-t1.MAD
-t1.MAI
 t1.frm
-master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 SELECT * from const_table
+t1.ibd
+master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE `t1` (
+  `new` int(11) DEFAULT NULL,
+  `b` int(11) DEFAULT NULL
+)
+master-bin.000001	#	Annotate_rows	#	#	CREATE OR REPLACE TABLE t1 SELECT * from const_table
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
@@ -364,10 +349,13 @@
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_after_remove_backup
-t1.MAD
-t1.MAI
 t1.frm
-master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 SELECT * from const_table
+t1.ibd
+master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE `t1` (
+  `new` int(11) DEFAULT NULL,
+  `b` int(11) DEFAULT NULL
+)
+master-bin.000001	#	Annotate_rows	#	#	CREATE OR REPLACE TABLE t1 SELECT * from const_table
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
