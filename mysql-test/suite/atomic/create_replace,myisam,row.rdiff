--- create_replace.result
+++ create_replace,myisam,row.reject
@@ -1,4 +1,4 @@
-set @@default_storage_engine=Aria;
+set @@default_storage_engine=MyISAM;
 create table t1 (c int);
 create or replace table t1 (a int, b int, key k (a), key k (b));
 ERROR 42000: Duplicate key name 'k'
@@ -11,8 +11,8 @@
 flush tables;
 # QUERY: CREATE OR REPLACE TABLE t1 (new int)
 # CRASH POINT: ddl_log_replace_after_rename_table
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -22,8 +22,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_create_frm
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -33,8 +33,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_create_table
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -44,8 +44,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_create_table
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -55,8 +55,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_drop
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -67,8 +67,8 @@
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_send_data
 # No crash!
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.frm
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
@@ -77,8 +77,8 @@
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_create_before_binlog
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -89,8 +89,8 @@
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_prepare_eof
 # No crash!
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.frm
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
@@ -99,8 +99,8 @@
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_create_after_binlog
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.frm
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
@@ -110,8 +110,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_create_log_complete
 # No crash!
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.frm
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
@@ -120,8 +120,8 @@
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_before_remove_backup
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.frm
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
@@ -130,8 +130,8 @@
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_after_remove_backup
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.frm
 master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 (new int)
 Table	Create Table
@@ -141,8 +141,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # QUERY: CREATE OR REPLACE TABLE t1 LIKE const_table
 # CRASH POINT: ddl_log_replace_after_rename_table
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -152,8 +152,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_create_frm
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -163,8 +163,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_create_table
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -174,8 +174,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_create_table
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -185,8 +185,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_drop
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -205,11 +205,11 @@
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
   `b` int(11) DEFAULT NULL
-) ENGINE=MyISAM DEFAULT CHARSET=latin1
+) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_create_before_binlog
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -228,7 +228,7 @@
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
   `b` int(11) DEFAULT NULL
-) ENGINE=MyISAM DEFAULT CHARSET=latin1
+) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_create_after_binlog
 t1.MYD
@@ -239,7 +239,7 @@
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
   `b` int(11) DEFAULT NULL
-) ENGINE=MyISAM DEFAULT CHARSET=latin1
+) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_create_log_complete
 # No crash!
@@ -251,7 +251,7 @@
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
   `b` int(11) DEFAULT NULL
-) ENGINE=MyISAM DEFAULT CHARSET=latin1
+) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_before_remove_backup
 t1.MYD
@@ -262,7 +262,7 @@
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
   `b` int(11) DEFAULT NULL
-) ENGINE=MyISAM DEFAULT CHARSET=latin1
+) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_after_remove_backup
 t1.MYD
@@ -273,12 +273,12 @@
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
   `b` int(11) DEFAULT NULL
-) ENGINE=MyISAM DEFAULT CHARSET=latin1
+) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # QUERY: CREATE OR REPLACE TABLE t1 SELECT * from const_table
 # CRASH POINT: ddl_log_replace_after_rename_table
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -289,8 +289,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_create_frm
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -301,8 +301,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_create_table
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -313,8 +313,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_create_table
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -325,8 +325,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_drop
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -337,8 +337,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_send_data
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -349,8 +349,8 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_before_binlog
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.TRG
 t1.frm
 Table	Create Table
@@ -361,74 +361,80 @@
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_prepare_eof
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
+t1.TRG
 t1.frm
-master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 SELECT * from const_table
 Table	Create Table
 t1	CREATE TABLE `t1` (
-  `new` int(11) DEFAULT NULL,
-  `b` int(11) DEFAULT NULL
+  `old` int(11) DEFAULT NULL
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
-new	b
-1	1
-2	2
+old
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
+a	INSERT	t1	set @s= 1	BEFORE						
 # CRASH POINT: ddl_log_create_after_binlog
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.frm
-master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 SELECT * from const_table
+master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE `t1` (
+  `new` int(11) DEFAULT NULL,
+  `b` int(11) DEFAULT NULL
+)
+master-bin.000001	#	Annotate_rows	#	#	CREATE OR REPLACE TABLE t1 SELECT * from const_table
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
   `b` int(11) DEFAULT NULL
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 new	b
-1	1
-2	2
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_create_log_complete
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.frm
-master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 SELECT * from const_table
+master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE `t1` (
+  `new` int(11) DEFAULT NULL,
+  `b` int(11) DEFAULT NULL
+)
+master-bin.000001	#	Annotate_rows	#	#	CREATE OR REPLACE TABLE t1 SELECT * from const_table
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
   `b` int(11) DEFAULT NULL
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 new	b
-1	1
-2	2
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_before_remove_backup
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.frm
-master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 SELECT * from const_table
+master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE `t1` (
+  `new` int(11) DEFAULT NULL,
+  `b` int(11) DEFAULT NULL
+)
+master-bin.000001	#	Annotate_rows	#	#	CREATE OR REPLACE TABLE t1 SELECT * from const_table
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
   `b` int(11) DEFAULT NULL
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 new	b
-1	1
-2	2
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 # CRASH POINT: ddl_log_replace_after_remove_backup
-t1.MAD
-t1.MAI
+t1.MYD
+t1.MYI
 t1.frm
-master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE t1 SELECT * from const_table
+master-bin.000001	#	Query	#	#	use `test`; CREATE OR REPLACE TABLE `t1` (
+  `new` int(11) DEFAULT NULL,
+  `b` int(11) DEFAULT NULL
+)
+master-bin.000001	#	Annotate_rows	#	#	CREATE OR REPLACE TABLE t1 SELECT * from const_table
 Table	Create Table
 t1	CREATE TABLE `t1` (
   `new` int(11) DEFAULT NULL,
   `b` int(11) DEFAULT NULL
 ) ENGINE=DEFAULT_ENGINE DEFAULT CHARSET=latin1
 new	b
-1	1
-2	2
 Trigger	Event	Table	Statement	Timing	Created	sql_mode	Definer	character_set_client	collation_connection	Database Collation
 Warnings:
 Note	1051	Unknown table 'test.t1'
