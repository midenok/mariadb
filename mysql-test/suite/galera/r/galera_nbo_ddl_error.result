connection node_2;
connection node_1;
CREATE TABLE t1 (f1 INTEGER, f2 INTEGER);
SET SESSION wsrep_OSU_method=NBO;
ALTER TABLE t1 LOCK=SHARED, ADD COLUMN f2 INTEGER;
ERROR 42S21: Duplicate column name 'f2'
connection node_1;
SELECT COUNT(*) = 2 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 't1';
COUNT(*) = 2
1
connection node_2;
SELECT COUNT(*) = 2 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 't1';
COUNT(*) = 2
1
connection node_1;
ALTER TABLE t1 LOCK=SHARED, ADD COLUMN f3 INTEGER;
connection node_2;
SET SESSION wsrep_OSU_method=NBO;
ALTER TABLE t1 LOCK=SHARED, ADD COLUMN f4 INTEGER;
connection node_1;
SELECT COUNT(*) = 4 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 't1';
COUNT(*) = 4
1
connection node_2;
SELECT COUNT(*) = 4 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 't1';
COUNT(*) = 4
1
SET SESSION wsrep_osu_method=TOI;
DROP TABLE t1;
connection node_2;
CALL mtr.add_suppression("Slave SQL: Error 'Duplicate column name");
CALL mtr.add_suppression("WSREP: Event 1 Query apply failed");
