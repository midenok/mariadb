#
# MENT-699 sql_mode oracle grammar misses out shutdown's WAIT_SYM FOR_SYM ALL SLAVES
# The test of MENT-64 runs SHUTDOWN in specific 'oracle' sql_mode.
# MENT-202 Implement system variable that makes slow master shutdown the default behavior
# The test checks the non-default value of introduced @@global.shutdown_wait_slaves.
#
--source include/have_innodb.inc
--source include/have_debug.inc
--let $rpl_topology=1->2, 1->3, 1->4
--source include/rpl_init.inc

--connection server_1
--let $sql_mode_cmd=SET @@sql_mode='oracle'
--let $sav_var=`SELECT @@global.shutdown_wait_for_slaves`
SET @@global.shutdown_wait_for_slaves = 1;
--source include/rpl_shutdown_wait_slaves.inc
--eval SET @@global.shutdown_wait_for_slaves = $sav_var
--source include/rpl_end.inc

